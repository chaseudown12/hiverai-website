<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background: url('isnetworld.png') no-repeat center center fixed;
            background-size: cover;
        }
        #popup {
            font-weight: bold;
            display: none;
            position: fixed;
            bottom: 10px;
            left: 10px;
            background-color: white;
            color: #2c3e50;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            width: 600px;
            text-align: center;
            border: 5.625px solid #ff5733;
            transform-origin: bottom left;
            animation: expandPopup 0.5s ease-out forwards;
        }
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .company-name {
            font-weight: bold;
            font-size: 2em;
            color: #1f497d;
            border: none;
            background: none;
            text-align: center;
            width: 90%;
        }
        .button-container {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            margin-top: 15px;
            width: 100%;
        }
        .button {
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            width: 120px;
            text-align: center;
        }
        .verified-button {
            background-color: #1f497d;
        }
        .update-button {
            background-color: #28a745;
        }
        .save-button {
            background-color: #d9534f;
            display: none;
        }
    </style>
</head>
<body>
    <div id="overlay"></div>
    <div id="popup">
        <div style="text-align: center;">
            <img src="wayfinderlogo.png" alt="Wayfinder Logo" style="height: 50px; vertical-align: middle;"> 
            <span style="color: #1f497d; font-size: 1.5em; font-weight: bold;">AI Assistant</span>
        </div>
        <p>Wayfinder AI: I see it's your first time visiting your ISNetworld portal. Before you start working on your RAVS, let's double check that your records match what you provided to ISNetworld. I have your name as:</p>
        
        <input type="text" id="companyName" class="company-name" disabled>
        
        <p>in my system. If they don't match, your RAVS will get kicked back. Double check and then click "Verified" or "Update" below.</p>
        
        <div class="button-container">
            <button class="button verified-button" onclick="closePopup()">Verified</button>
            <button class="button update-button" onclick="enableEditing()">Update</button>
            <button class="button save-button" id="saveButton" onclick="saveCompanyName()" disabled>Save</button>
        </div>
    </div>

    <script>
        // Default list of company names
        let defaultCompanyNames = [
            "Smith & Sons Contractors", "Elite Roofing Solutions", "Pioneer Welding Co.", 
            "Titan Industrial Services", "Evergreen Landscaping LLC", "NorthStar Energy Solutions",
            "Precision Electrical Works", "Global Manufacturing Ltd.", "Summit Safety Inspections", 
            "FastTrack Logistics Inc.", "Vertex Engineering Group", "Mountain Peak Construction",
            "Infinity Mechanical Services", "ProBuild Contractors LLC", "NextGen Industrial Tech",
            "Reliable Heavy Equipment Co.", "Skyline Drilling Services", "Zenith Automation Systems",
            "TopTier Industrial Coatings", "Peak Performance Industries", "Omega Welding & Fabrication",
            "Vanguard HVAC Solutions", "Eagle Eye Security Services", "Nexus Pipeline Solutions",
            "Summit Concrete & Masonry", "Everlast Power Systems", "Stratus Renewable Energy",
            "RockSolid Mining Equipment", "Genesis Structural Engineering", "IronClad Metal Works"
        ];

        function getStoredCompanyNames() {
            let storedNames = JSON.parse(localStorage.getItem("companyNames"));
            return storedNames ? storedNames : [...defaultCompanyNames];
        }

        function saveCompanyNames(names) {
            localStorage.setItem("companyNames", JSON.stringify(names));
        }

        function getRandomCompanyName() {
            let companyNames = getStoredCompanyNames();
            let randomIndex = Math.floor(Math.random() * companyNames.length);
            return companyNames[randomIndex];
        }

        function enableEditing() {
            let companyInput = document.getElementById('companyName');
            let saveButton = document.getElementById('saveButton');

            companyInput.removeAttribute('disabled'); // Enable text editing
            companyInput.focus(); // Cursor appears
            saveButton.style.display = "inline-block"; // Show save button
            saveButton.removeAttribute('disabled'); // Enable save button
        }

        function saveCompanyName() {
            let companyInput = document.getElementById('companyName');
            let saveButton = document.getElementById('saveButton');

            let companyNames = getStoredCompanyNames();
            let newCompanyName = companyInput.value.trim();

            if (newCompanyName && !companyNames.includes(newCompanyName)) {
                companyNames.push(newCompanyName);

                // If the list exceeds 100 names, remove the last 25 entries
                if (companyNames.length > 100) {
                    companyNames.splice(0, 25);
                }

                saveCompanyNames(companyNames);
            }

            companyInput.setAttribute('disabled', true); // Disable editing again
            saveButton.style.display = "none"; // Hide save button
            alert("Company name updated to: " + newCompanyName);
        }

        window.onload = function() {
            // Assign a random company name on load
            document.getElementById('companyName').value = getRandomCompanyName();

            setTimeout(function() {
                document.getElementById('popup').style.display = 'block';
                document.getElementById('overlay').style.display = 'block';
            }, 1500);
        };

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
    </script>
</body>
</html>
